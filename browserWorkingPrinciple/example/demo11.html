<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var xhr = new XMLHttpRequest()
      var url = "https://time.geekbang.org/"
      function handler() {
        switch (xhr.readyState) {
          case 0: // 请求未初始化
            console.log(" 请求未初始化 ")
            break
          case 1: //OPENED
            console.log("OPENED")
            break
          case 2: //HEADERS_RECEIVED
            console.log("HEADERS_RECEIVED")
            break
          case 3: //LOADING
            console.log("LOADING")
            break
          case 4: //DONE
            if (this.status == 200 || this.status == 304) {
              console.log(this.responseText)
            }
            console.log("DONE")
            break
        }
      }

      function callOtherDomain() {
        if (xhr) {
          xhr.open("GET", url, true)
          xhr.onreadystatechange = handler
          xhr.send()
        }
      }
      callOtherDomain()
    </script>
  </body>
</html>
