## 页面性能：如何系统优化页面
- 页面三阶段： 加载阶段、交互阶段和关闭阶段

## 加载阶段
- 加载渲染流水线
  - 加载主页面 ->(阻止) 构建DOM ->(阻止) 执行JavaScript -> 继续构建DOM -> 构建CSSOM -> 构建布局树 -> 渲染
  - 请求html文件 -> 响应html数据 -> 预解析 （请求js文件、css文件） --> 响应JS数据 --> 响应CSS数据

- 关键资源： 能阻塞网页首次渲染的资源称为关键资源
  - html文件、Js文件、CSS文件

- 影响首次渲染的核心因素
 - 关键资源个数
 - 关键资源大小
 - 请求关键资源需要多少个RTT

- 优化方案
  - 减少关键资源的个数，将JS、CSS改为内联的形式，或将没有DOM操作的JS使用异步加载（sync,defer）
  - 减少关键资源的大小，压缩CSS、JS资源、移除HTML、CSS、JS不必要的注释
  - 减少关键资源RTT的次数 减少关键资源的个数和关键资源的大小搭配实现，使用CDN来减少每次RTT时长


## 交互阶段
- 交互阶段的渲染流水线
  - （主线程）JavaScript -> DOM/CSSOM -> 样式计算 -> 布局 -> 绘制 ->
  - （合成线程）                                                   栅格化 -> 合成

- 优化
  - 减少JavaScript脚本执行时间
  - 避免强制同步布局
  - 避免布局抖动
  - 合理利用CSS合成动画
  - 避免频繁的垃圾回收